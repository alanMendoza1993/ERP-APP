import { Component, OnInit } from '@angular/core';
import { FormGroup, FormControl, Validators } from '@angular/forms';
import { NgForm } from '@angular/forms';
import { WebsocketService } from 'src/app/services/web-socket.service';
import * as jsPDF from 'jspdf';
import * as html2canvas from 'html2canvas';

@Component({
  selector: 'app-order-buy',
  templateUrl: './order-buy.component.html',
  styleUrls: ['./order-buy.component.css']
})

export class OrderBuyComponent implements OnInit {
  w : number;
  model:any;
  folioLoad:any;
  Products:any=[];
  proveedores:any;
  loadArticle:any;
  productId:any;
  productCant:any;
  productName:any;
  orderBuy:any;
  price:any;
  subTotal:any=0;
  total:any;
  ProductsByOrder:any;
  providerName:any;
  providerFilter: any;
  dateInit:any;
  dateEnd:any= new Date().toISOString();
  validate:any = 0;
  constructor(private _w: WebsocketService) {
    this.w = Math.round(window.innerHeight * .93);
    this.init();
    this.getProviders();
    this.loadProduct();
    this.getData();
   }

  ngOnInit() {
  
  }

  init(){
    this.model = {
      type:"REQ",
      folio:"",
      providerId:"",
      currency:"",
      waitDate:"",
      products:this.Products,
      CC: "",
      producedBy:"",
      coments:"",
      iva:"",
      subTotal:"",
      total: "",
      status: "Esperando Factura",
      periodInit: "",
      periodEnd: "",
      period: ""
    }
  }
  generatePdf(id,folio){
    console.log(folio);
    let f = String(folio);
    /* if(folio == "" || folio == null){
      folio = 0;
    } */
    let ide = "'"+id+"'";
      html2canvas(document.getElementById(id), {
        allowTaint: true,
        useCORS: false,
        scale: 1
      }).then(function(canvas) {
        var img2 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAA3CAYAAACl6WBEAAAACXBIWXMAAAsTAAALEwEAmpwYAAA5q2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxMzggNzkuMTU5ODI0LCAyMDE2LzA5LzE0LTAxOjA5OjAxICAgICAgICAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiCiAgICAgICAgICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICAgICAgICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICAgICAgICAgICB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyI+CiAgICAgICAgIDx4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ+eG1wLmRpZDozNWI1NDUxNS0xNzExLWM0NDEtODg0Ny02NTlmZTk3MjhiMWY8L3htcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOkRvY3VtZW50SUQ+eG1wLmRpZDpGNTJENTk0OTNCODMxMUU3ODlGOUY0QzdGNDYxNTUyMTwveG1wTU06RG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOkluc3RhbmNlSUQ+eG1wLmlpZDo4MjkwNDgwMy00NDQ5LTZlNDUtODcyNi1kNDU1OGFjN2U4Mjg8L3htcE1NOkluc3RhbmNlSUQ+CiAgICAgICAgIDx4bXBNTTpEZXJpdmVkRnJvbSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgIDxzdFJlZjppbnN0YW5jZUlEPnhtcC5paWQ6ZTIwMjg4ZmUtMWE1ZS04NTQ0LWE0ZTQtZGI2YzFhM2Q3OTFkPC9zdFJlZjppbnN0YW5jZUlEPgogICAgICAgICAgICA8c3RSZWY6ZG9jdW1lbnRJRD54bXAuZGlkOjM1YjU0NTE1LTE3MTEtYzQ0MS04ODQ3LTY1OWZlOTcyOGIxZjwvc3RSZWY6ZG9jdW1lbnRJRD4KICAgICAgICAgPC94bXBNTTpEZXJpdmVkRnJvbT4KICAgICAgICAgPHhtcE1NOkhpc3Rvcnk+CiAgICAgICAgICAgIDxyZGY6U2VxPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5zYXZlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6aW5zdGFuY2VJRD54bXAuaWlkOjgyOTA0ODAzLTQ0NDktNmU0NS04NzI2LWQ0NTU4YWM3ZTgyODwvc3RFdnQ6aW5zdGFuY2VJRD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OndoZW4+MjAxOC0wNC0wMlQxNjowMzo1My0wNTowMDwvc3RFdnQ6d2hlbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnNvZnR3YXJlQWdlbnQ+QWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpPC9zdEV2dDpzb2Z0d2FyZUFnZW50PgogICAgICAgICAgICAgICAgICA8c3RFdnQ6Y2hhbmdlZD4vPC9zdEV2dDpjaGFuZ2VkPgogICAgICAgICAgICAgICA8L3JkZjpsaT4KICAgICAgICAgICAgPC9yZGY6U2VxPgogICAgICAgICA8L3htcE1NOkhpc3Rvcnk+CiAgICAgICAgIDx4bXA6Q3JlYXRvclRvb2w+QWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgICAgIDx4bXA6Q3JlYXRlRGF0ZT4yMDE4LTA0LTAyVDE2OjAyOjMzLTA1OjAwPC94bXA6Q3JlYXRlRGF0ZT4KICAgICAgICAgPHhtcDpNb2RpZnlEYXRlPjIwMTgtMDQtMDJUMTY6MDM6NTMtMDU6MDA8L3htcDpNb2RpZnlEYXRlPgogICAgICAgICA8eG1wOk1ldGFkYXRhRGF0ZT4yMDE4LTA0LTAyVDE2OjAzOjUzLTA1OjAwPC94bXA6TWV0YWRhdGFEYXRlPgogICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3BuZzwvZGM6Zm9ybWF0PgogICAgICAgICA8cGhvdG9zaG9wOkNvbG9yTW9kZT4zPC9waG90b3Nob3A6Q29sb3JNb2RlPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICAgICA8dGlmZjpYUmVzb2x1dGlvbj43MjAwMDAvMTAwMDA8L3RpZmY6WFJlc29sdXRpb24+CiAgICAgICAgIDx0aWZmOllSZXNvbHV0aW9uPjcyMDAwMC8xMDAwMDwvdGlmZjpZUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6UmVzb2x1dGlvblVuaXQ+MjwvdGlmZjpSZXNvbHV0aW9uVW5pdD4KICAgICAgICAgPGV4aWY6Q29sb3JTcGFjZT42NTUzNTwvZXhpZjpDb2xvclNwYWNlPgogICAgICAgICA8ZXhpZjpQaXhlbFhEaW1lbnNpb24+MTgwPC9leGlmOlBpeGVsWERpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxZRGltZW5zaW9uPjU1PC9leGlmOlBpeGVsWURpbWVuc2lvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz6taqRTAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAA/iSURBVHja7J17tB1Vfcc/e87zPnJvEpLrTXiEVyHQRCNvCGAUyhIiaEQsthIrRGxoXSgS6gtoK0EEXNBCTAEFqmkFivIIagpNCyiIxAJa5GUKIQSa8Ah53NzHmZm9+8f+zb37zD1zzrkn95Ws+a4168ydx56ZPd/927/nXGWMIUWK3QVe2gUpUkKnSJESOkWKlNApUqSETpESOkWKlNApUqSETpEiJXSKFPUhm7QjN+/i8g1KoVDRHweDOh3U0cChoCaiVFH2yYIcL+eoaOwoQPUC74B6BdSLwKNKqVVA4J4fwRjIeHDeYT4dLSF+YDDGoLXGmPL1RrcppcjnCykjdhEsX75saIROwIHA14FPAK07eU/TgdmyvgR4ClgK/GQX6M+9gfnAcUAnkAH6gNeBx4GHgVdqtHE5cHCD198KfBnorrBvBnDlIKlQG5uASwC/yjGfB+YBQ82XuBX4jyr7O4FvAzn5eynw+2GV0BXwGeB6YOIIkeQw4MfA1cBX4p1mRFKPgxntG8CFVfphEbBDXuD1wGMJJPko8P4G72MH8NUEQk8B/qyB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";
        var img = canvas.toDataURL("image/png");
        var doc = new jsPDF('p', 'pt', 'letter');
        doc.addImage(img2,'PNG',15, 30, 110, 60);
        doc.setFontSize(15);
        doc.text(170, 55, 'EMPRESA ACERERA S.A. DE C.V.');
        doc.setFontSize(15);
        doc.text(500, 55, 'Folio');
        doc.setFontSize(9);
        doc.text(510, 65, f);
        doc.setFontSize(9);
        doc.text(210, 65, 'Emilia Lagrange #114E Col. Lagrange');
        doc.setFontSize(9);
        doc.text(190, 75, 'San Nicolás de los Garza, N.L. México, CP 66490');
        doc.setFontSize(9);
        doc.text(240, 85, 'México, CP 66490');    
        doc.setFontSize(6);
        doc.text(190, 95, 'Llámanos: (81) 8142 1572');
        doc.setFontSize(6);
        doc.text(280, 95, 'Email: ventas@ACERERAcomplements.com.mx');  
        doc.addImage(img,'PNG',15, 155, 580, 280);
        doc.save('orden.pdf');
      });
    
  };
  getProviders(){
    let desde = 0;
    let filters = {
      "desde":desde,
      "limit": 50
    }
    this._w.emit("getProvider",filters, (res)=>{
      this.proveedores = res.obj;
      console.log(this.proveedores);
    });
  }

  loadByFolio(){
    let filters = {
      folio: {'$regex': this.folioLoad}
    };
    console.log(filters);
    this._w.emit("getOrderBuy",{filters},(res)=>{
      this.orderBuy = res.obj;
      console.log(this.orderBuy);
    });

  }
  loadValidate(){
    if(this.validate == 0){
      this.validate=1;
    }else{
      this.validate=0;
    }
    
  }

  loadDates(){
    console.log(this.providerFilter);
    let filters;
    
    
    let end = new Date(this.dateEnd);
    end.setDate(end.getDate()+1);
    
    if(this.providerFilter && this.dateInit){
      filters = {
        dateCreate:{
          '$gte': new Date(this.dateInit).toISOString(),
          '$lt': end.toISOString()
        },
        providerid: this.providerFilter
      };
    } 
    
    if(!this.providerFilter &&  this.dateInit ){
      filters = {
        dateCreate:{
          '$gte': new Date(this.dateInit).toISOString(),
          '$lt': end.toISOString()
          }
      };
    }
    if(this.providerFilter && !this.dateInit){
      filters = {
          providerid: this.providerFilter
      };
    }
   
    console.log(filters);
    this._w.emit("getOrderBuy",{filters},(res)=>{
      this.orderBuy = res.obj;
      console.log(this.orderBuy);
    });
  }

  loadProduct(){
    let filters = {
      providerId: { $exists: true} 
    }
    this._w.emit("getProducts",{filters},(res)=>{
      this.loadArticle = res.obj;
      console.log(this.loadArticle);
    });
  }

  loadNameProduct(){
    console.log(this.productId);
    let filters = {
      _id: this.productId
    };
    
    this._w.emit("getProducts",{filters},(res)=>{  
      this.productName = res.obj[0].title;
      console.log(this.productName);
    });    
  }

  loadProducts(id,provider){
    let filters = {
      orderBuyId: id
    };
    
    this._w.emit("getProductsOrderBuy",{filters},(res)=>{ 
      this.ProductsByOrder = res.obj; 
      let filters = {
        "_id": provider
      }
      console.log(provider);
      this._w.emit("getProvider",{filters}, (res)=>{
        this.providerName = (res.obj[0].comercialName)?res.obj[0].comercialName:res.obj[0].NombreComercial;
        console.log(res);
      });
      console.log(res);
    });
  }
  addProduct(){
    let obj = {
      "productId":this.productId,
      "name": this.productName,
      "quantity": this.productCant,
      "price": this.price
    };
    this.Products.push(obj);
    this.subTotal = 0;
    this.Products.forEach(element => {
      this.subTotal = this.subTotal + (element.price * element.quantity);
    });
    
    this.total = (this.subTotal)+((this.subTotal * this.model.iva)/100);

    //cargar datos al modelo
    this.model.subTotal = this.subTotal;
    this.model.total = this.total;
  }

  save(){
    console.log(this.model);
    this._w.emit("createOrderBuy",this.model,(res)=>{
      swal({
        title: res.status+"!",
        text: res.obj,
        icon: res.ok
      })
      this.init();
      this.Products = [];
      this.getData();
    });
  }
  getData(){
    this._w.emit("getOrderBuy","",(res)=>{
      this.orderBuy = res.obj;
      console.log(this.orderBuy);
    });
  }

  delete(_id){
    swal({
      title: "¿Estas Seguro de eliminar?",
      text: "Esta apunto de eliminar una orden de compra",
      icon: "warning",
      buttons: {
        cancel: { text: 'Cancelar' },
        confirm: { text: 'Confirmar' },
      },
      dangerMode: true
    })
.then((willDelete) => {
      if (willDelete) {
       this._w.emit("deleteOrderBuy",_id, (res)=>{
          swal("Eliminado correctamente!", {
            icon: "success",
          });
        });        
      } else {
        swal("Cancelado!");
      }
    });
    this.init();
      this.Products = [];
      this.getData();
  }
}
